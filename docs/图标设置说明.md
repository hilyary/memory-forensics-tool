# åº”ç”¨å›¾æ ‡è®¾ç½®è¯´æ˜

## ğŸ“‹ å½“å‰çŠ¶æ€

ä½ çš„åº”ç”¨å·²ç»æœ‰ä»¥ä¸‹å›¾æ ‡æ–‡ä»¶ï¼š

```
frontend/assets/
â”œâ”€â”€ LensAnalysis-icon.svg     # æºæ–‡ä»¶ï¼ˆçŸ¢é‡ï¼‰
â”œâ”€â”€ LensAnalysis-icon.png     # PNG æ ¼å¼ï¼ˆå·²ç”¨äºç•Œé¢ï¼‰
â”œâ”€â”€ LensAnalysis-icon.ico     # Windows å›¾æ ‡ âœ“
â”œâ”€â”€ LensAnalysis-light.ico    # æµ…è‰²ä¸»é¢˜å›¾æ ‡
â”œâ”€â”€ LensAnalysis-dark.ico     # æ·±è‰²ä¸»é¢˜å›¾æ ‡
â””â”€â”€ LensAnalysis-icon.icns    # macOS å›¾æ ‡ (å¾…ç”Ÿæˆ)
```

## âœ… å·²å®Œæˆçš„ä¿®æ”¹

### 1. `backend/app.py` - è‡ªåŠ¨æ£€æµ‹å¹³å°å¹¶ä½¿ç”¨å¯¹åº”å›¾æ ‡

```python
def _get_app_icon(self) -> Path:
    """æ ¹æ®å¹³å°è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å›¾æ ‡æ ¼å¼"""
    if platform.system() == 'Windows':
        # ä½¿ç”¨ .ico
        icon_files = ['LensAnalysis-icon.ico', 'LensAnalysis-icon.png']
    elif platform.system() == 'Darwin':
        # ä½¿ç”¨ .icns
        icon_files = ['LensAnalysis-icon.icns', 'LensAnalysis-icon.png']
    else:
        # Linux ä½¿ç”¨ .png
        icon_files = ['LensAnalysis-icon.png']
```

## ğŸ¨ å¦‚ä½•ç”Ÿæˆ macOS .icns å›¾æ ‡

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨åœ¨çº¿å·¥å…·ï¼ˆæ¨èï¼‰

1. è®¿é—® [https://cloudconvert.com/svg-to-icns](https://cloudconvert.com/svg-to-icns)
2. ä¸Šä¼  `frontend/assets/LensAnalysis-icon.svg`
3. ä¸‹è½½ç”Ÿæˆçš„ `.icns` æ–‡ä»¶
4. æ”¾åˆ° `frontend/assets/` ç›®å½•

### æ–¹æ³•äºŒï¼šåœ¨ macOS ä¸Šç”Ÿæˆ

å¦‚æœä½ æœ‰ Macï¼Œä½¿ç”¨è„šæœ¬ï¼š

```bash
# å®‰è£…ä¾èµ–
pip install Pillow cairosvg

# è¿è¡Œç”Ÿæˆè„šæœ¬
python tools/generate_icons.py
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨åˆ›å»ºï¼ˆæ— éœ€å·¥å…·ï¼‰

å¦‚æœä½ å·²ç»æœ‰ .png æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ macOS ä¸Šè¿è¡Œï¼š

```bash
# 1. åˆ›å»º iconset ç›®å½•
mkdir LensAnalysis-icon.iconset

# 2. ç”Ÿæˆä¸åŒå°ºå¯¸ï¼ˆéœ€è¦ ImageMagick æˆ–å…¶ä»–å·¥å…·ï¼‰
# è¿™é‡Œæä¾›ä¸€ä¸ªç®€åŒ–ç¤ºä¾‹
sips -z 16 16     LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_16x16.png
sips -z 32 32     LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_16x16@2x.png
sips -z 32 32     LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_32x32.png
sips -z 64 64     LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_32x32@2x.png
sips -z 128 128   LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_128x128.png
sips -z 256 256   LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_128x128@2x.png
sips -z 256 256   LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_256x256.png
sips -z 512 512   LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_256x256@2x.png
sips -z 512 512   LensAnalysis-icon.png --out LensAnalysis-icon.iconset/icon_512x512.png

# 3. ç”Ÿæˆ .icns
iconutil -c icns LensAnalysis-icon.iconset

# 4. ç§»åŠ¨åˆ°æ­£ç¡®ä½ç½®
mv LensAnalysis-icon.icns frontend/assets/
```

## ğŸ§ª æµ‹è¯•å›¾æ ‡

è¿è¡Œç¨‹åºæŸ¥çœ‹å›¾æ ‡æ•ˆæœï¼š

```bash
# å¼€å‘ç¯å¢ƒ
python main.py

# æˆ–è€…æ‰“åŒ…å
python build_nuitka.py
```

### å„å¹³å°å›¾æ ‡ä½ç½®

| å¹³å° | å›¾æ ‡æ˜¾ç¤ºä½ç½® |
|------|--------------|
| **Windows** | ä»»åŠ¡æ ã€çª—å£æ ‡é¢˜æ ã€ä»»åŠ¡ç®¡ç†å™¨ |
| **macOS** | Dockã€çª—å£æ ‡é¢˜æ ã€Command+Tab |
| **Linux** | Dockã€çª—å£æ ‡é¢˜æ ã€ä»»åŠ¡ç®¡ç†å™¨ |

## âš ï¸ å¸¸è§é—®é¢˜

### Q: å›¾æ ‡æ²¡æœ‰æ›´æ–°ï¼Ÿ

**è§£å†³æ–¹æ³•**ï¼š
1. **æ¸…é™¤ç¼“å­˜**ï¼šåˆ é™¤ `build/` æˆ– `dist/` ç›®å½•
2. **é‡å¯ç¨‹åº**ï¼šå®Œå…¨å…³é—­åé‡æ–°æ‰“å¼€
3. **Windows**ï¼šæ¸…é™¤å›¾æ ‡ç¼“å­˜
   ```bash
   ie4uinit.exe -show
   ```
4. **macOS**ï¼šåˆ·æ–° Dock
   ```bash
   killall Dock
   ```

### Q: macOS ä¸Šå›¾æ ‡ä¸æ˜¾ç¤ºï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. `.icns` æ–‡ä»¶æœªæ­£ç¡®ç”Ÿæˆ
2. æ‰“åŒ…æ—¶æœªåŒ…å«å›¾æ ‡æ–‡ä»¶

**è§£å†³æ–¹æ³•**ï¼š
- ç¡®ä¿ `LensAnalysis-icon.icns` æ–‡ä»¶å­˜åœ¨
- æ£€æŸ¥æ‰“åŒ…é…ç½®ä¸­çš„å›¾æ ‡è·¯å¾„

### Q: Windows ä¸Šå›¾æ ‡æ˜¾ç¤ºæ¨¡ç³Šï¼Ÿ

**è§£å†³æ–¹æ³•**ï¼š
- ç¡®ä¿ä½¿ç”¨ `.ico` æ ¼å¼è€Œä¸æ˜¯ `.png`
- `.ico` æ–‡ä»¶åº”åŒ…å«å¤šç§å°ºå¯¸ï¼ˆ16x16 åˆ° 256x256ï¼‰

## ğŸ“¦ æ‰“åŒ…æ—¶çš„å›¾æ ‡

æ‰“åŒ…åçš„ç¨‹åºå›¾æ ‡ç”±æ‰“åŒ…å·¥å…·é…ç½®ï¼š

### PyInstaller
```python
# build.spec
exe = EXE(
    ...
    icon='frontend/assets/LensAnalysis-icon.ico',  # Windows
)
```

### Nuitka
```python
# build_nuitka.py æˆ– LensAnalysis.nuitka
--macos-app-icon=frontend/assets/LensAnalysis-icon.icns  # macOS
```

## âœ… å½“å‰çŠ¶æ€

- âœ… `app.py` å·²æ·»åŠ å›¾æ ‡æ”¯æŒ
- âœ… å·²æœ‰ `.ico` æ–‡ä»¶ï¼ˆWindowsï¼‰
- âœ… å·²æœ‰ `.png` æ–‡ä»¶ï¼ˆLinux/é€šç”¨ï¼‰
- âš ï¸ éœ€è¦ `.icns` æ–‡ä»¶ï¼ˆmacOSï¼‰

**ä¸‹ä¸€æ­¥**ï¼šä½¿ç”¨ä¸Šè¿°æ–¹æ³•ç”Ÿæˆ macOS çš„ `.icns` æ–‡ä»¶ã€‚
