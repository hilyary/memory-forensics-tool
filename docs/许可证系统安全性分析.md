# æ¿€æ´»ç ç³»ç»Ÿå®‰å…¨æ€§åˆ†æä¸æ”¹è¿›æ–¹æ¡ˆ

## å½“å‰ç³»ç»Ÿçš„å®‰å…¨æ¼æ´

### ä¸¥é‡ç¨‹åº¦ï¼šğŸ”´ é«˜å±

1. **å¯†é’¥ç¡¬ç¼–ç **
   - å¯†é’¥ç›´æ¥å†™åœ¨æºä»£ç ä¸­
   - ä»»ä½•äººéƒ½å¯ä»¥çœ‹åˆ°å¹¶å¤åˆ¶
   - å¯ä»¥è‡ªå·±ç”Ÿæˆæ— é™æ¿€æ´»ç 

2. **æ— æœºå™¨ç»‘å®š**
   - æ¿€æ´»ç å¯ä»¥åœ¨æ— é™å°è®¾å¤‡ä½¿ç”¨
   - ç”¨æˆ·å¯ä»¥éšæ„åˆ†äº«

3. **çº¯æœ¬åœ°éªŒè¯**
   - å®¢æˆ·ç«¯éªŒè¯é€»è¾‘å¯ä»¥ä¿®æ”¹
   - æ²¡æœ‰æœåŠ¡å™¨æ§åˆ¶

4. **Pythonä»£ç å¯åç¼–è¯‘**
   - å³ä½¿Nuitkaæ‰“åŒ…ä¹Ÿå¯ä»¥åç¼–è¯‘
   - å¯†é’¥å’Œæ•°æ®ç»“æ„éƒ½èƒ½çœ‹åˆ°

## ç ´è§£éš¾åº¦è¯„ä¼°

| æ”»å‡»æ–¹å¼ | éš¾åº¦ | æ—¶é—´ | è¯´æ˜ |
|---------|------|------|------|
| å¤åˆ¶å¯†é’¥ç”Ÿæˆæ¿€æ´»ç  | â­ | 1åˆ†é’Ÿ | æŸ¥çœ‹æºä»£ç å³å¯ |
| ç»•è¿‡éªŒè¯ä¿®æ”¹ä»£ç  | â­â­ | 10åˆ†é’Ÿ | åˆ é™¤éªŒè¯é€»è¾‘ |
| åç¼–è¯‘è·å–å¯†é’¥ | â­â­â­ | 1å°æ—¶ | éœ€è¦é€†å‘å·¥å…· |
| æš´åŠ›ç ´è§£ç­¾å | â­â­â­â­ | å¾ˆé•¿æ—¶é—´ | 16å­—ç¬¦ç­¾å |

**ç»“è®º**ï¼šå½“å‰ç³»ç»Ÿåªèƒ½é˜²å°ç™½ï¼Œå¯¹æŠ€æœ¯äººå‘˜æ¯«æ— é˜²å¾¡èƒ½åŠ›ã€‚

---

## æ¨èæ”¹è¿›æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šåœ¨çº¿éªŒè¯ï¼ˆæ¨èï¼‰

#### ä¼˜ç‚¹
- âœ… æœ€å®‰å…¨
- âœ… å¯ä»¥éšæ—¶ç¦ç”¨æŸä¸ªæ¿€æ´»ç 
- âœ… å¯ä»¥è¿½è¸ªä½¿ç”¨æƒ…å†µ
- âœ… åæœŸå®¹æ˜“æ¥å…¥ä»˜è´¹

#### å®ç°æ–¹å¼
```python
# åœ¨çº¿éªŒè¯æµç¨‹
1. ç”¨æˆ·è¾“å…¥æ¿€æ´»ç 
2. å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡å™¨éªŒè¯
3. æœåŠ¡å™¨è¿”å›ï¼š
   - æ˜¯å¦æœ‰æ•ˆ
   - è¿‡æœŸæ—¶é—´
   - æœºå™¨ç»‘å®šçŠ¶æ€
   - ä½¿ç”¨æ¬¡æ•°é™åˆ¶
4. å®¢æˆ·ç«¯ç¼“å­˜éªŒè¯ç»“æœï¼ˆ24å°æ—¶æœ‰æ•ˆï¼‰
```

#### æœåŠ¡å™¨ç«¯ï¼ˆç®€å•ï¼‰
```python
# ä½¿ç”¨ Flask/FastAPI æ­å»ºç®€å•çš„API
import hmac
import hashlib
from datetime import datetime

SECRET_KEY = "ä»…åœ¨æœåŠ¡å™¨ä¸Šçš„å¯†é’¥"  # ä¸æ³„éœ²ï¼

licenses_db = {
    "LENS-user001-0-abc123": {
        "user": "user001",
        "expiry": 0,  # 0è¡¨ç¤ºæ°¸ä¹…
        "machine_bound": False,
        "usage_count": 0,
        "max_usage": 1  # å¯ä»¥æ”¹ä¸º3ï¼Œå…è®¸3å°è®¾å¤‡
    }
}

@app.post('/api/verify')
def verify_license(request):
    key = request.json.get('license_key')

    if key not in licenses_db:
        return {"valid": False, "message": "æ— æ•ˆçš„æ¿€æ´»ç "}

    license_data = licenses_db[key]

    # æ£€æŸ¥è¿‡æœŸ
    if license_data['expiry'] > 0:
        if datetime.now().timestamp() > license_data['expiry']:
            return {"valid": False, "message": "æ¿€æ´»ç å·²è¿‡æœŸ"}

    # æ£€æŸ¥æœºå™¨ç»‘å®š
    if license_data.get('machine_bound'):
        if license_data.get('machine_id') != request.json.get('machine_id'):
            return {"valid": False, "message": "æ¿€æ´»ç å·²ç»‘å®šå…¶ä»–è®¾å¤‡"}

    return {
        "valid": True,
        "user": license_data['user'],
        "expiry": license_data['expiry']
    }
```

#### éƒ¨ç½²é€‰é¡¹
1. **å…è´¹æœåŠ¡å™¨**ï¼š
   - Vercel (Serverless)
   - Render (å…è´¹å¥—é¤)
   - Railway (å…è´¹å¥—é¤)
   - PythonAnywhere (å…è´¹)

2. **æˆæœ¬**ï¼š$0/æœˆ

---

### æ–¹æ¡ˆäºŒï¼šç¡¬ä»¶ç»‘å®š + æ··æ·†

#### ä¼˜ç‚¹
- âœ… ä¸éœ€è¦æœåŠ¡å™¨
- âœ… æ¿€æ´»ç åªèƒ½åœ¨ä¸€å°æœºå™¨ä½¿ç”¨
- âœ… æ¯”çº¯æœ¬åœ°éªŒè¯å®‰å…¨

#### ç¼ºç‚¹
- âŒ æ— æ³•è¿œç¨‹ç¦ç”¨æ¿€æ´»ç 
- âŒ ä»ç„¶å¯ä»¥è¢«é€†å‘ç ´è§£

#### å®ç°æ–¹å¼
```python
# 1. ç”Ÿæˆæ¿€æ´»ç æ—¶ç»‘å®šæœºå™¨ID
def generate_license_with_machine(user_id: str, machine_id: str):
    data_to_sign = f"{user_id}-{machine_id}"
    signature = hmac.new(secret, data_to_sign.encode(), hashlib.sha256).hexdigest()
    return f"LENS-{user_id}-{machine_id[:8]}-{signature[:16]}"

# 2. éªŒè¯æ—¶æ£€æŸ¥æœºå™¨ID
def verify_with_machine(license_key: str):
    parts = license_key.split('-')
    machine_id_short = parts[2]

    # è·å–å½“å‰æœºå™¨IDå¹¶æ¯”å¯¹
    current_machine = get_machine_id()[:8]
    if machine_id_short != current_machine:
        return False, "æ¿€æ´»ç ä¸å½“å‰è®¾å¤‡ä¸åŒ¹é…"

    return True, "éªŒè¯é€šè¿‡"
```

---

### æ–¹æ¡ˆä¸‰ï¼šä»£ç æ··æ·† + Nuitka

#### ä¼˜ç‚¹
- âœ… å¢åŠ é€†å‘éš¾åº¦
- âœ… ä¿æŠ¤å…³é”®é€»è¾‘

#### å®ç°æ–¹å¼
```bash
# ä½¿ç”¨Nuitkaæ‰“åŒ…
python -m nuitka \
  --standalone \
  --enable-plugin=pyarmor \
  --follow-imports \
  LensAnalysis.py

# ä½¿ç”¨PyArmoræ··æ·†
pyarmor obfuscate --recursive backend/
```

---

## ç»¼åˆæ¨èæ–¹æ¡ˆ

### å¯¹äºæ‚¨çš„æƒ…å†µï¼ˆç›®å‰å…è´¹ï¼ŒåæœŸå¯èƒ½æ”¶è´¹ï¼‰

æˆ‘æ¨èï¼š**åœ¨çº¿éªŒè¯ + æœ¬åœ°ç¼“å­˜**

#### å…·ä½“å®ç°

1. **é¦–æ¬¡æ¿€æ´»**ï¼šåœ¨çº¿éªŒè¯
2. **åç»­å¯åŠ¨**ï¼šæœ¬åœ°ç¼“å­˜éªŒè¯ï¼ˆ24å°æ—¶æœ‰æ•ˆï¼‰
3. **å®šæœŸè”ç½‘éªŒè¯**ï¼šæ¯7å¤©åœ¨çº¿éªŒè¯ä¸€æ¬¡

#### ä¼˜ç‚¹
- âœ… å®‰å…¨æ€§é«˜
- âœ… ç¦»çº¿ä¹Ÿèƒ½ç”¨ï¼ˆçŸ­æœŸï¼‰
- âœ… å¯ä»¥è¿œç¨‹ç¦ç”¨
- âœ… å¯ä»¥è¿½è¸ªä½¿ç”¨
- âœ… æˆæœ¬ä½ï¼ˆå…è´¹æœåŠ¡å™¨ï¼‰

#### æˆæœ¬
- å¼€å‘æ—¶é—´ï¼š4-6å°æ—¶
- æœåŠ¡å™¨æˆæœ¬ï¼š$0/æœˆ
- ç»´æŠ¤æˆæœ¬ï¼šä½

---

## ç ´è§£å¯¹æ¯”

| æ–¹æ¡ˆ | ç ´è§£éš¾åº¦ | æ—¶é—´ | æˆæœ¬ |
|------|---------|------|------|
| **å½“å‰ï¼ˆæœ¬åœ°éªŒè¯ï¼‰** | â­ | 1åˆ†é’Ÿ | $0 |
| **æ··æ·†+æœ¬åœ°éªŒè¯** | â­â­â­ | 1å°æ—¶ | $0 |
| **åœ¨çº¿éªŒè¯** | â­â­â­â­â­ | å¾ˆéš¾/ä¸å¯èƒ½ | $0/æœˆ |
| **åœ¨çº¿+æ··æ·†** | â­â­â­â­â­â­ | å‡ ä¹ä¸å¯èƒ½ | $0/æœˆ |

---

## æˆ‘çš„å»ºè®®

### æœ€å°æ”¹åŠ¨ï¼ˆ1å°æ—¶å†…å®Œæˆï¼‰
1. å¯ç”¨æœºå™¨ç»‘å®š
2. ä¿®æ”¹ç”Ÿæˆå·¥å…·æ—¶ç»‘å®šæœºå™¨ID
3. å¢åŠ ç ´è§£éš¾åº¦åˆ° â­â­â­

### æ¨èæ–¹æ¡ˆï¼ˆåŠå¤©å®Œæˆï¼‰
1. æ­å»ºç®€å•çš„åœ¨çº¿éªŒè¯API
2. æœ¬åœ°ç¼“å­˜24å°æ—¶
3. å¢åŠ ç ´è§£éš¾åº¦åˆ° â­â­â­â­â­

### æœ€ä½³æ–¹æ¡ˆï¼ˆ1-2å¤©å®Œæˆï¼‰
1. åœ¨çº¿éªŒè¯ + æœºå™¨ç»‘å®š
2. ä»£ç æ··æ·†
3. å®šæœŸéªŒè¯
4. å¢åŠ ç ´è§£éš¾åº¦åˆ° â­â­â­â­â­â­

---

## éœ€è¦æˆ‘å¸®æ‚¨å®ç°å“ªä¸ªæ–¹æ¡ˆï¼Ÿ

### é€‰é¡¹1ï¼šæœ€å°æ”¹åŠ¨
- å¯ç”¨æœºå™¨ç»‘å®š
- ä¿®æ”¹æ¿€æ´»ç ç”Ÿæˆé€»è¾‘
- 1å°æ—¶å†…å®Œæˆ

### é€‰é¡¹2ï¼šåœ¨çº¿éªŒè¯ï¼ˆæ¨èï¼‰
- æ­å»ºç®€å•çš„Flask API
- ä¿®æ”¹éªŒè¯é€»è¾‘
- åŠå¤©å®Œæˆ

### é€‰é¡¹3ï¼šä¿æŒç°çŠ¶
- å…ˆå‘å¸ƒï¼Œçœ‹æƒ…å†µ
- å¦‚æœæœ‰äººç ´è§£å†æ”¹è¿›
- é€‚åˆæ—©æœŸé˜¶æ®µ

---

**æ‚¨çš„é€‰æ‹©ï¼Ÿ** æˆ‘å¯ä»¥ç«‹å³å¸®æ‚¨å®ç°ã€‚
